<%- include("partials/header.ejs") %>

<div class="container mt-5 mb-5">
  <h1 class="text-center mb-5 fw-semibold">Home page of Blog</h1>
  <% if (locals.articleslist && locals.articles) { %>
  <div class="col-lg-7 col-md-9 col-11 mx-auto">

    <% locals.articleslist.forEach(element => { %>
      <article class="py-4 border-bottom">
        <li>
        <!-- Title -->
        <form action="/submit" method="POST">
          <button type="submit" class="d-flex align-items-center gap-2 text-decoration-none post-title text-dark fw-semibold" name="articleName" value="<%=element%>">
            <i class="fas fa-file-alt text-muted"></i>
            <span><%= element %></span>
          </button>
        </form>

        <!-- Preview -->
        <p class="post-preview text-muted mt-2 mb-2">
          <%= articles[element].text %>
        </p>

        <!-- Meta + Actions -->
        <div class="d-flex justify-content-between
                    align-items-center
                    flex-wrap gap-2">

          <small class="text-muted">
            <i class="far fa-calendar-alt me-1"></i>
            <%= articles[element].createdAt %>
          </small>

          <div class="post-actions">
            <form action="/edit" method="POST" style="display: inline;" >
            <button type="submit" class="text-decoration-none me-3" name="articleName" value="<%=element%>">
              <i class="fas fa-edit"></i> Edit
            </button>
            </form>
            <form action="/delete" method="POST" class="d-inline">
              <button type="submit" class="btn btn-link p-0 text-danger" name="articleName" value="<%=element%>" >
                <i class="fas fa-trash"></i> Delete
              </button>
            </form>
          </div>

        </div>
        </li>
      </article>
    <% }) %>

  </div>
  <% } else { %>
  <p>No articles found.</p>
  <a class="btn btn-outline-primary" href="/new"><i class="fas fa-plus"></i>Add New Article</a>
  <% } %>
</div>

<%- include("partials/footer.ejs") %>